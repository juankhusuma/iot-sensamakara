<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Sensa Makara | Gemastik IOT</title>
  </head>
  <body>
    <div class="loader">
      <img src="/makara.png" alt="Makara Universitas Indonesia" width="150px" />
    </div>

    <div class="content">
      <h1 id="m-input"></h1>
      <h1 id="m-output"></h1>
      <input class="t-input" type="text" />
      <div id="char"></div>
      <ul class="suggestions"></ul>
    </div>

    <footer>Made by Sensa Makara team at Universitas Indonesia</footer>

    <script type="module" src="/main.js"></script>
    <!-- <script defer>
      const f = document.getElementById("morse");
      const m = document.getElementById("m-input");
      const c = document.getElementById("char");
      const o = document.getElementById("m-output");

      const morse = {
        ".-": "A",
        "-...": "B",
        "-.-.": "C",
        "-..": "D",
        ".": "E",
        "..-.": "F",
        "--.": "G",
        "....": "H",
        "..": "I",
        ".---": "J",
        "-.-": "K",
        ".-..": "L",
        "--": "M",
        "-.": "N",
        "---": "O",
        ".--.": "P",
        "--.-": "Q",
        ".-.": "R",
        "...": "S",
        "-": "T",
        "..-": "U",
        "...-": "V",
        ".--": "W",
        "-..-": "X",
        "-.--": "Y",
        "--..": "Z",
        "----": " ",
      };

      window.addEventListener("click", (e) => {
        if (e.button === 0) {
          if (morse[m.innerHTML]) {
            c.value += morse[m.innerHTML];
          }
          m.innerHTML = "";
        }
      });
      window.addEventListener("keypress", (e) => {
        if (m.innerHTML.length > 0 && e.key === " ") {
          m.innerHTML = m.innerHTML.slice(0, m.innerHTML.length - 1);
        }
        if (m.innerHTML.length > 0 && e.key === "z") {
          c.value = c.value.slice(0, c.value.length - 1);
        }
      });

      // var p = document.querySelector("#text");

      let cur = "";
      (async () => {
        setInterval(async () => {
          const res = await fetch("{{ url_for('camera_feed') }}");
          const t = await res.text();
          // p.innerHTML = t;
          console.log(t);
          cur = t;
        }, 100);
      })();

      (async () => {
        setInterval(() => {
          m.innerHTML += cur;
          if (morse[cur]) {
            o.innerHTML = morse[cur];
          } else {
            o.innerHTML = "<unknown>";
          }
          cur = "";
        }, 1000);
      })(); -->
    </script>
  </body>
</html>
